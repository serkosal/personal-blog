{% extends "main/base.html" %}

{% block content %}
    {% if post %}
        <h1> {{ post.title }} </h1>
        <p>
            {{ post.author }}

            {% if can_edit %}
                <a href="{% url 'blog:edit' pk=post.id %}">Edit post</a>
                <a href="{% url 'blog:delete' pk=post.id %}">Delete post</a>
            {% endif %}
        </p>
        <p>
            {% if post.content.blocks %}

                {% for block in post.content.blocks %}
                    <div>
                        {% if block.type == 'header' %}
                            <h{{block.data.level}}> 
                                {{block.data.text}} 
                            </h{{block.data.level}}>
                        {% elif block.type == 'paragraph' %}
                            <p>{{block.data.text}}</p>
                        {% elif block.type == 'quote' %}
                            <div class="quote" style="border: 1px solid white;">
                                <p>{{block.data.text}}</p><br>
                                <p>{{block.data.caption}}</p>
                            </div>
                        {% elif block.type == 'list' %}
                            {% if block.data.style == 'checklist' %}
                                <!-- checklist:<br> -->
                                {% include "blog/partials/checklist.html" with el=block.data %}
                            {% elif block.data.style == 'ordered' %}
                                {% include "blog/partials/ordered_list.html" with el=block.data %}
                            {% elif block.data.style == 'unordered' %}
                                {% include "blog/partials/unordered_list.html" with el=block.data %}
                            {% endif %}
                        {% else %}
                            {{ block }}
                        {% endif %}
                    </div>
                {% endfor %}

            {% endif %}
        </p>
    {% endif %}
{% endblock %}